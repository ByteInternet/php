--- old/ext/zip/php_zip.c	2006/12/24 01:29:20	1.1.2.22
+++ new/ext/zip/php_zip.c	2006/12/25 22:40:23	1.1.2.23
@@ -1086,8 +1086,8 @@
 		ze_obj->buffers_cnt++;
 		pos = 0;
 	}
-	ze_obj->buffers[pos] = (char *)emalloc(buffer_len);
-	memcpy(ze_obj->buffers[pos], buffer, buffer_len);
+	ze_obj->buffers[pos] = (char *)emalloc(buffer_len + 1);
+	memcpy(ze_obj->buffers[pos], buffer, buffer_len + 1);
 
 	zs = zip_source_buffer(intern, ze_obj->buffers[pos], buffer_len, 0);
 
